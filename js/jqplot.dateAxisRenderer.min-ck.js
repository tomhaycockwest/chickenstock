/* jqPlot 1.0.8r1250 | (c) 2009-2013 Chris Leonello | jplot.com
   jsDate | (c) 2010-2013 Chris Leonello
 */(function(e){function h(e,t,n){var r=Number.MAX_VALUE,i,s,o;for(var u=0,a=l.length;u<a;u++){i=Math.abs(n-l[u]);if(i<r){r=i;s=l[u];o=f[u]}}return[s,o]}e.jqplot.DateAxisRenderer=function(){e.jqplot.LinearAxisRenderer.call(this);this.date=new e.jsDate};var t=1e3,n=60*t,r=60*n,i=24*r,s=7*i,o=30.4368499*i,u=365.242199*i,a=[31,28,31,30,31,30,31,30,31,30,31,30],f=["%M:%S.%#N","%M:%S.%#N","%M:%S.%#N","%M:%S","%M:%S","%M:%S","%M:%S","%H:%M:%S","%H:%M:%S","%H:%M","%H:%M","%H:%M","%H:%M","%H:%M","%H:%M","%a %H:%M","%a %H:%M","%b %e %H:%M","%b %e %H:%M","%b %e %H:%M","%b %e %H:%M","%v","%v","%v","%v","%v","%v","%v"],l=[.1*t,.2*t,.5*t,t,2*t,5*t,10*t,15*t,30*t,n,2*n,5*n,10*n,15*n,30*n,r,2*r,4*r,6*r,8*r,12*r,i,2*i,3*i,4*i,5*i,s,2*s],c=[];e.jqplot.DateAxisRenderer.prototype=new e.jqplot.LinearAxisRenderer;e.jqplot.DateAxisRenderer.prototype.constructor=e.jqplot.DateAxisRenderer;e.jqplot.DateTickFormatter=function(t,n){t||(t="%Y/%m/%d");return e.jsDate.strftime(n,t)};e.jqplot.DateAxisRenderer.prototype.init=function(t){this.tickOptions.formatter=e.jqplot.DateTickFormatter;this.tickInset=0;this.drawBaseline=!0;this.baselineWidth=null;this.baselineColor=null;this.daTickInterval=null;this._daTickInterval=null;e.extend(!0,this,t);var n=this._dataBounds,r,i,s,o,u,a,f;for(var l=0;l<this._series.length;l++){r={intervals:[],frequencies:{},sortedIntervals:[],min:null,max:null,mean:null};i=0;s=this._series[l];o=s.data;u=s._plotData;a=s._stackData;f=0;for(var c=0;c<o.length;c++){if(this.name=="xaxis"||this.name=="x2axis"){o[c][0]=(new e.jsDate(o[c][0])).getTime();u[c][0]=(new e.jsDate(o[c][0])).getTime();a[c][0]=(new e.jsDate(o[c][0])).getTime();if(o[c][0]!=null&&o[c][0]<n.min||n.min==null)n.min=o[c][0];if(o[c][0]!=null&&o[c][0]>n.max||n.max==null)n.max=o[c][0];if(c>0){f=Math.abs(o[c][0]-o[c-1][0]);r.intervals.push(f);r.frequencies.hasOwnProperty(f)?r.frequencies[f]+=1:r.frequencies[f]=1}i+=f}else{o[c][1]=(new e.jsDate(o[c][1])).getTime();u[c][1]=(new e.jsDate(o[c][1])).getTime();a[c][1]=(new e.jsDate(o[c][1])).getTime();if(o[c][1]!=null&&o[c][1]<n.min||n.min==null)n.min=o[c][1];if(o[c][1]!=null&&o[c][1]>n.max||n.max==null)n.max=o[c][1];if(c>0){f=Math.abs(o[c][1]-o[c-1][1]);r.intervals.push(f);r.frequencies.hasOwnProperty(f)?r.frequencies[f]+=1:r.frequencies[f]=1}}i+=f}if(s.renderer.bands){if(s.renderer.bands.hiData.length){var h=s.renderer.bands.hiData;for(var c=0,p=h.length;c<p;c++)if(this.name==="xaxis"||this.name==="x2axis"){h[c][0]=(new e.jsDate(h[c][0])).getTime();if(h[c][0]!=null&&h[c][0]>n.max||n.max==null)n.max=h[c][0]}else{h[c][1]=(new e.jsDate(h[c][1])).getTime();if(h[c][1]!=null&&h[c][1]>n.max||n.max==null)n.max=h[c][1]}}if(s.renderer.bands.lowData.length){var h=s.renderer.bands.lowData;for(var c=0,p=h.length;c<p;c++)if(this.name==="xaxis"||this.name==="x2axis"){h[c][0]=(new e.jsDate(h[c][0])).getTime();if(h[c][0]!=null&&h[c][0]<n.min||n.min==null)n.min=h[c][0]}else{h[c][1]=(new e.jsDate(h[c][1])).getTime();if(h[c][1]!=null&&h[c][1]<n.min||n.min==null)n.min=h[c][1]}}}var d=0,v=0;for(var m in r.frequencies)r.sortedIntervals.push({interval:m,frequency:r.frequencies[m]});r.sortedIntervals.sort(function(e,t){return t.frequency-e.frequency});r.min=e.jqplot.arrayMin(r.intervals);r.max=e.jqplot.arrayMax(r.intervals);r.mean=i/o.length;this._intervalStats.push(r);r=i=s=o=u=a=null}n=null};e.jqplot.DateAxisRenderer.prototype.reset=function(){this.min=this._options.min;this.max=this._options.max;this.tickInterval=this._options.tickInterval;this.numberTicks=this._options.numberTicks;this._autoFormatString="";this._overrideFormatString&&this.tickOptions&&this.tickOptions.formatString&&(this.tickOptions.formatString="");this.daTickInterval=this._daTickInterval};e.jqplot.DateAxisRenderer.prototype.createTicks=function(t){var n=this._ticks,r=this.ticks,s=this.name,a=this._dataBounds,f=this._intervalStats,l=this.name.charAt(0)==="x"?this._plotDimensions.width:this._plotDimensions.height,c,p,d,v,m,g,y,b=30,w=1,E=null;if(this.tickInterval!=null)if(Number(this.tickInterval))E=[Number(this.tickInterval),"seconds"];else if(typeof this.tickInterval=="string"){var S=this.tickInterval.split(" ");S.length==1?E=[1,S[0]]:S.length==2&&(E=[S[0],S[1]])}var x=this.tickInterval;p=(new e.jsDate(this.min!=null?this.min:a.min)).getTime();d=(new e.jsDate(this.max!=null?this.max:a.max)).getTime();var T=t.plugins.cursor;if(T&&T._zoom&&T._zoom.zooming){this.min=null;this.max=null}var N=d-p;if(this.tickOptions==null||!this.tickOptions.formatString)this._overrideFormatString=!0;if(r.length){for(y=0;y<r.length;y++){var C=r[y],L=new this.tickRenderer(this.tickOptions);if(C.constructor==Array){L.value=(new e.jsDate(C[0])).getTime();L.label=C[1];if(!this.showTicks){L.showLabel=!1;L.showMark=!1}else this.showTickMarks||(L.showMark=!1);L.setTick(L.value,this.name);this._ticks.push(L)}else{L.value=(new e.jsDate(C)).getTime();if(!this.showTicks){L.showLabel=!1;L.showMark=!1}else this.showTickMarks||(L.showMark=!1);L.setTick(L.value,this.name);this._ticks.push(L)}}this.numberTicks=r.length;this.min=this._ticks[0].value;this.max=this._ticks[this.numberTicks-1].value;this.daTickInterval=[(this.max-this.min)/(this.numberTicks-1)/1e3,"seconds"]}else if(this.min==null&&this.max==null&&a.min==a.max){var A=e.extend(!0,{},this.tickOptions,{name:this.name,value:null}),O=3e5;this.min=a.min-O;this.max=a.max+O;this.numberTicks=3;for(var y=this.min;y<=this.max;y+=O){A.value=y;var L=new this.tickRenderer(A);this._overrideFormatString&&this._autoFormatString!=""&&(L.formatString=this._autoFormatString);L.showLabel=!1;L.showMark=!1;this._ticks.push(L)}this.showTicks&&(this._ticks[1].showLabel=!0);this.showTickMarks&&(this._ticks[1].showTickMarks=!0)}else if(this.min==null&&this.max==null){var M=e.extend(!0,{},this.tickOptions,{name:this.name,value:null}),_,D;if(!this.tickInterval&&!this.numberTicks){var P=Math.max(l,b+1),H=115;this.tickRenderer===e.jqplot.CanvasAxisTickRenderer&&this.tickOptions.angle&&(H=115-40*Math.abs(Math.sin(this.tickOptions.angle/180*Math.PI)));_=Math.ceil((P-b)/H+1);D=(d-p)/(_-1)}else if(this.tickInterval)D=(new e.jsDate(0)).add(E[0],E[1]).getTime();else if(this.numberTicks){_=this.numberTicks;D=(d-p)/(_-1)}if(D<=19*i){var B=h(p,d,D),F=B[0];this._autoFormatString=B[1];p=new e.jsDate(p);p=Math.floor((p.getTime()-p.getUtcOffset())/F)*F+p.getUtcOffset();_=Math.ceil((d-p)/F)+1;this.min=p;this.max=p+(_-1)*F;if(this.max<d){this.max+=F;_+=1}this.tickInterval=F;this.numberTicks=_;for(var y=0;y<_;y++){M.value=this.min+y*F;L=new this.tickRenderer(M);this._overrideFormatString&&this._autoFormatString!=""&&(L.formatString=this._autoFormatString);if(!this.showTicks){L.showLabel=!1;L.showMark=!1}else this.showTickMarks||(L.showMark=!1);this._ticks.push(L)}w=this.tickInterval}else if(D<=9*o){this._autoFormatString="%v";var I=Math.round(D/o);I<1?I=1:I>6&&(I=6);var q=(new e.jsDate(p)).setDate(1).setHours(0,0,0,0),R=new e.jsDate(d),U=(new e.jsDate(d)).setDate(1).setHours(0,0,0,0);R.getTime()!==U.getTime()&&(U=U.add(1,"month"));var z=U.diff(q,"month");_=Math.ceil(z/I)+1;this.min=q.getTime();this.max=q.clone().add((_-1)*I,"month").getTime();this.numberTicks=_;for(var y=0;y<_;y++){y===0?M.value=q.getTime():M.value=q.add(I,"month").getTime();L=new this.tickRenderer(M);this._overrideFormatString&&this._autoFormatString!=""&&(L.formatString=this._autoFormatString);if(!this.showTicks){L.showLabel=!1;L.showMark=!1}else this.showTickMarks||(L.showMark=!1);this._ticks.push(L)}w=I*o}else{this._autoFormatString="%v";var I=Math.round(D/u);I<1&&(I=1);var q=(new e.jsDate(p)).setMonth(0,1).setHours(0,0,0,0),U=(new e.jsDate(d)).add(1,"year").setMonth(0,1).setHours(0,0,0,0),W=U.diff(q,"year");_=Math.ceil(W/I)+1;this.min=q.getTime();this.max=q.clone().add((_-1)*I,"year").getTime();this.numberTicks=_;for(var y=0;y<_;y++){y===0?M.value=q.getTime():M.value=q.add(I,"year").getTime();L=new this.tickRenderer(M);this._overrideFormatString&&this._autoFormatString!=""&&(L.formatString=this._autoFormatString);if(!this.showTicks){L.showLabel=!1;L.showMark=!1}else this.showTickMarks||(L.showMark=!1);this._ticks.push(L)}w=I*u}}else{s=="xaxis"||s=="x2axis"?l=this._plotDimensions.width:l=this._plotDimensions.height;this.min!=null&&this.max!=null&&this.numberTicks!=null&&(this.tickInterval=null);this.tickInterval!=null&&E!=null&&(this.daTickInterval=E);if(p==d){var X=432e5;p-=X;d+=X}N=d-p;var V=2+parseInt(Math.max(0,l-100)/100,10),$,J;$=this.min!=null?(new e.jsDate(this.min)).getTime():p-N/2*(this.padMin-1);J=this.max!=null?(new e.jsDate(this.max)).getTime():d+N/2*(this.padMax-1);this.min=$;this.max=J;N=this.max-this.min;if(this.numberTicks==null)if(this.daTickInterval!=null){var K=(new e.jsDate(this.max)).diff(this.min,this.daTickInterval[1],!0);this.numberTicks=Math.ceil(K/this.daTickInterval[0])+1;this.max=(new e.jsDate(this.min)).add((this.numberTicks-1)*this.daTickInterval[0],this.daTickInterval[1]).getTime()}else l>200?this.numberTicks=parseInt(3+(l-200)/100,10):this.numberTicks=2;w=N/(this.numberTicks-1)/1e3;this.daTickInterval==null&&(this.daTickInterval=[w,"seconds"]);for(var y=0;y<this.numberTicks;y++){var p=new e.jsDate(this.min);g=p.add(y*this.daTickInterval[0],this.daTickInterval[1]).getTime();var L=new this.tickRenderer(this.tickOptions);if(!this.showTicks){L.showLabel=!1;L.showMark=!1}else this.showTickMarks||(L.showMark=!1);L.setTick(g,this.name);this._ticks.push(L)}}if(this.tickInset){this.min=this.min-this.tickInset*w;this.max=this.max+this.tickInset*w}this._daTickInterval==null&&(this._daTickInterval=this.daTickInterval);n=null}})(jQuery);